{% extends 'base.html.twig' %}

{% block title %}Mon Panier | Zed Shop
{% endblock %}

{% block content %}
	<h1>Mon Panier</h1>
	Retrouvez l'ensemble des produits séléctionés dans votre pannier.
	<table class="table table-hover mt-3">
		<thead>
			<tr>
				<th scope="col">Produit</th>
				<th scope="col"></th>
				<th scope="col">Quantité</th>
				<th scope="col">Prix</th>
				<th scope="col">Total</th>
			</tr>
		</thead>
		<tbody>
			{% set total = null %}
			{# Déclaration de variable avec twig #}

			{% for product in cart %}
				{# A chaque fois que j'ai un produit dans mon pannier tu l'affiches  #}

				<tr>
					<th scope="row">
						<img src="/uploads/{{product.product.illustration}}" alt="{{product.product.name}}" height="50px">
					</th>

					<td>{{product.product.name}}
						<br/>
						<small>{{product.product.subtitle}}</small>
					</td>
					<td>{{product.quantity}}</td>
					<td>{{ (product.product.price /100)| number_format(2,'.',',') }}
						€</td>
					<td>
						{{((product.product.price * product.quantity) /100)| number_format(2,'.',',') }}
						€</td>
				</tr>
				{% set total = total + (product.product.price * product.quantity) %}
			{% endfor %}
		</tbody>
	</table>
	<div class="text-right mb-5">
		<b>Nombre de produit :
		</b>
		{{cart|length}}<br>
		<b>Prix total de mon panier :</b>
		{{ (total/100)| number_format(2,'.',',') }}
		€
		<br>
		<a href="" class="btn btn-success m-3">Valider mon panier</a>

	</div>

{% endblock %}
